{"componentChunkName":"component---src-templates-template-js","path":"/action/cascade/","result":{"data":{"page":{"html":"<h1 id=\"metadata-cascade-objectarray-optional\" style=\"position:relative;\"><a href=\"#metadata-cascade-objectarray-optional\" aria-label=\"metadata cascade objectarray optional permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Metadata \"cascade\" (object|array, optional)</h1>\n<div class=\"toc\">\n<h2><a href=\"#toc\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h2>\n<ul>\n<li><a href=\"#usage\">Usage</a></li>\n<li><a href=\"#hiding-an-option\">Hiding an option</a></li>\n<li><a href=\"#global-definition\">Global definition</a></li>\n<li><a href=\"#session-definition\">Session definition</a></li>\n</ul>\n</div>\n<p>Options may be propagated to every child actions. This is not the default behavior, options are not passed to child actions unless they are declared by the \"cascade\" option.</p>\n<p>It sometimes convenient to pass specific options to an action. For example, an action which write files in a specific format may itself rely on the <code class=\"language-text\">nikita.file</code> action to handle changes of ownerships and permissions. Another example is the \"ssh\" option which activate or desactivate ssh for an action and all its children.</p>\n<h2 id=\"usage\" style=\"position:relative;\"><a href=\"#usage\" aria-label=\"usage permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Usage</h2>\n<p>To do so, cascaded options must be declared inside the \"cascade\" option which is an object where keys represent the option to propagate and values are a boolean indicated whether an option is propagated or not:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'nikita'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  a_cascaded_option<span class=\"token operator\">:</span> <span class=\"token string\">'a cascaded value'</span><span class=\"token punctuation\">,</span>\n  a_regular_option<span class=\"token operator\">:</span> <span class=\"token string\">'another value'</span><span class=\"token punctuation\">,</span>\n  cascade<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    a_cascaded_option<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>options<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token function\">assert</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">.</span>a_cascaded_option<span class=\"token punctuation\">,</span> <span class=\"token string\">'a cascaded value'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">assert</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">.</span>a_regular_option<span class=\"token punctuation\">,</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Note, the \"cascade\" option may also be declared as an array. In such case, all options defined inside the array will be cascaded. The previous example is identical to:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'nikita'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  a_cascaded_option<span class=\"token operator\">:</span> <span class=\"token string\">'a cascaded value'</span><span class=\"token punctuation\">,</span>\n  a_regular_option<span class=\"token operator\">:</span> <span class=\"token string\">'another value'</span><span class=\"token punctuation\">,</span>\n  cascade<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'a_cascaded_option'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>options<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token function\">assert</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">.</span>a_cascaded_option<span class=\"token punctuation\">,</span> <span class=\"token string\">'a cascaded value'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">assert</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">.</span>a_regular_option<span class=\"token punctuation\">,</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"hiding-an-option\" style=\"position:relative;\"><a href=\"#hiding-an-option\" aria-label=\"hiding an option permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hiding an option</h2>\n<p>When the value is false, the option is never transmitted. It will not be made available to the current action nor to its children:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'nikita'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  invisible_option<span class=\"token operator\">:</span> <span class=\"token string\">'a value'</span><span class=\"token punctuation\">,</span>\n  cascade<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    invisible_option<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>options<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function\">assert</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">.</span>invisible_option<span class=\"token punctuation\">,</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>The following actions are not passed: <code class=\"language-text\">after</code>, <code class=\"language-text\">before</code>, <code class=\"language-text\">disabled</code>, <code class=\"language-text\">domain</code>, <code class=\"language-text\">handler</code>, <code class=\"language-text\">header</code>, <code class=\"language-text\">once</code>, <code class=\"language-text\">relax</code>, <code class=\"language-text\">shy</code>, <code class=\"language-text\">sleep</code>.</p>\n<p>Use a value of <code class=\"language-text\">null</code> or <code class=\"language-text\">undefined</code> to achieve the default behavior where options are passed to the current action but not to its children.</p>\n<h2 id=\"global-definition\" style=\"position:relative;\"><a href=\"#global-definition\" aria-label=\"global definition permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Global definition</h2>\n<p>To avoid declaring a option as cascaded over and over, it is also possible to define it globally, across all Nikita session:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'nikita'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span>cascade<span class=\"token punctuation\">.</span>my_cascaded_option <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span></code></pre></div>\n<p>The following options are globally cascaded: <code class=\"language-text\">cwd</code>, <code class=\"language-text\">ssh</code>, <code class=\"language-text\">log</code>, <code class=\"language-text\">stdout</code>, <code class=\"language-text\">stderr</code>, <code class=\"language-text\">debug</code>, <code class=\"language-text\">sudo</code>.</p>\n<p>Be carefully when using this functionality as it will affect every created and future Nikita sessions.</p>\n<h2 id=\"session-definition\" style=\"position:relative;\"><a href=\"#session-definition\" aria-label=\"session definition permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Session definition</h2>\n<p>When an option must be globally cascaded and to avoid polluting the global context, it is recommended to declare it when initializing the session.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'nikita'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  cascade<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    my_cascaded_option<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>my_cascaded_option<span class=\"token operator\">:</span> <span class=\"token string\">'a value'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Option my_cascaded_option will be passed to child actions</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>options<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token function\">assert</span><span class=\"token punctuation\">(</span>my_cascaded_option<span class=\"token punctuation\">,</span> <span class=\"token string\">'a value'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>","fields":{"slug":"/action/cascade/","edit_url":"https://github.com/adaltas/node-nikita-docs/edit/master/src/md/action/cascade.md"},"frontmatter":{"title":"Cascade","description":null,"keywords":null}}},"pageContext":{}}}